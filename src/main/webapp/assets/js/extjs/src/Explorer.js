Ext.define("Ext.ux.Explorer",{extend:"Ext.panel.Panel",xtype:"explorer",requires:["Ext.layout.container.Border","Ext.toolbar.Breadcrumb","Ext.tree.Panel"],config:{breadcrumb:{dock:"top",xtype:"breadcrumb",reference:"breadcrumb"},contentView:{xtype:"dataview",reference:"contentView",region:"center",cls:Ext.baseCSSPrefix+"explorer-view",itemSelector:"."+Ext.baseCSSPrefix+"explorer-item",tpl:'<tpl for=".">'+'<div class="'+Ext.baseCSSPrefix+'explorer-item">'+'<div class="{iconCls}">'+'<div class="'+Ext.baseCSSPrefix+"explorer-node-icon"+'{[values.leaf ? " '+Ext.baseCSSPrefix+"explorer-leaf-icon"+'" : ""]}'+'">'+"</div>"+'<div class="'+Ext.baseCSSPrefix+'explorer-item-text">{text}</div>'+"</div>"+"</div>"+"</tpl>"},store:null,tree:{xtype:"treepanel",reference:"tree",region:"west",width:200}},renderConfig:{selection:null},layout:"border",referenceHolder:true,defaultListenerScope:true,cls:Ext.baseCSSPrefix+"explorer",initComponent:function(){var b=this,a=b.getStore();
if(!a){Ext.raise("Ext.ux.Explorer requires a store.");}b.dockedItems=[b.getBreadcrumb()];b.items=[b.getTree(),b.getContentView()];b.callParent();},applyBreadcrumb:function(b){var a=this.getStore();b=Ext.create(Ext.apply({store:a,selection:a.getRoot()},b));b.on("selectionchange","_onBreadcrumbSelectionChange",this);
return b;},applyContentView:function(a){var b=this.contentStore=new Ext.data.Store({model:this.getStore().model});a=Ext.create(Ext.apply({store:b},a));return a;},applyTree:function(a){a=Ext.create(Ext.apply({store:this.getStore()},a));a.on("selectionchange","_onTreeSelectionChange",this);return a;},updateSelection:function(b){var f=this,h=f.getReferences(),e=h.breadcrumb,i=h.tree,d=i.getSelectionModel(),g=f.contentStore,c,a;
if(e.getSelection()!==b){e.setSelection(b);}if(d.getSelection()[0]!==b){d.select([b]);c=b.parentNode;if(c){c.expand();}a=i.getView();a.scrollRowIntoView(a.getRow(b));}g.removeAll();g.add(b.hasChildNodes()?b.childNodes:[b]);},updateStore:function(a){this.getBreadcrumb().setStore(a);},privates:{_onTreeSelectionChange:function(a,b){this.setSelection(b[0]);
},_onBreadcrumbSelectionChange:function(b,a){this.setSelection(a);}}});