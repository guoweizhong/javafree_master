Ext.define("Ext.data.request.Base",{requires:["Ext.Deferred"],mixins:["Ext.mixin.Factoryable"],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;
b.options=a.options;b.requestOptions=a.requestOptions;},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a);}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=true;}a.abort=Ext.emptyFn;},createDeferred:function(){var b=this,a=b.result,c=new Ext.Deferred();
if(b.completed){if(b.success){c.resolve(a);}else{c.reject(a);}}b.deferred=c;return c;},getDeferred:function(){return this.deferred||this.createDeferred();},getPromise:function(){return this.getDeferred().promise;},then:function(){var a=this.getPromise();return a.then.apply(a,arguments);},onComplete:function(){var c=this,b=c.deferred,a=c.result;
c.clearTimer();if(b){if(c.success){b.resolve(a);}else{b.reject(a);}}c.completed=true;},onTimeout:function(){var a=this;a.timedout=true;a.timer=null;a.abort(true);},getTimeout:function(){return this.timeout;},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null;}},destroy:function(){var a=this;
a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent();},privates:{createException:function(){var b=this,a;a={request:b,requestId:b.id,status:b.aborted?-1:0,statusText:b.aborted?"transaction aborted":"communication failure",getResponseHeader:b._getHeader,getAllResponseHeaders:b._getHeaders};
if(b.aborted){a.aborted=true;}if(b.timedout){a.timedout=true;}return a;},_getHeader:function(a){var b=this.headers;return b&&b[a.toLowerCase()];},_getHeaders:function(){return this.headers;}}});