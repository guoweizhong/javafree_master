Ext.define("Ext.data.virtual.Page",{isVirtualPage:true,begin:0,end:0,error:null,locked:null,number:0,operation:null,pageMap:null,records:null,state:null,constructor:function(b){var c=this,a;Ext.apply(c,b);a=c.pageMap.store.getPageSize();c.begin=c.number*a;c.end=c.begin+a;c.locks={active:0,prefetch:0};
},destroy:function(){var b=this,a=b.operation;b.state="destroyed";if(a){a.abort();}b.callParent();},adjustLock:function(c,g){var e=this,d=e.locks,a=e.pageMap,b=null,f=e.locked;if(!(c in d)){Ext.raise('Bad lock type (expected "active" or "prefetch"): "'+c+'"');}if(g!==1&&g!==-1){Ext.raise("Invalid lock count delta (should be 1 or -1): "+g);
}d[c]+=g;if(d.active){b="active";}else{if(d.prefetch){b="prefetch";}}if(b!==f){e.locked=b;if(a){a.onPageLockChange(e,b,f);}}},clearRecords:function(b,f){var e=this,d=e.begin,a=e.records,c,g;if(a){g=a.length;if(f){for(c=0;c<g;++c){delete b[a[c][f]];}}else{for(c=0;c<g;++c){delete b[d+c];}}}},fillRecords:function(d,g,j){var h=this,c=h.records,b=h.begin,e,a,f;
if(c){a=c.length;if(g){for(e=0;e<a;++e){f=c[e];d[f[g]]=j?b+e:f;}}else{for(e=0;e<a;++e){d[b+e]=c[e];}}}},isInitial:function(){return this.state===null;},isLoaded:function(){return this.state==="loaded";},isLoading:function(){return this.state==="loading";},load:function(){var b=this,a;b.state="loading";
a=b.pageMap.store.loadVirtualPage(b,b.onLoad,b);if(b.state==="loading"){b.operation=a;}},privates:{onLoad:function(a){var b=this;b.operation=null;if(!b.destroyed){if(!(b.error=a.getError())){b.records=a.getRecords();b.state="loaded";}else{b.state="error";}b.pageMap.onPageLoad(b);}}}});