Ext.define("Ext.data.flash.BinaryXhr",{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready");},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(d,c,b){var a;
a=this.liveConnections[Number(d)];if(a){a.onFlashStateChange(c,b);}else{Ext.warn.log("onFlashStateChange for unknown connection ID: "+d);}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a;},injectFlashPlugin:function(){var b=this,a,c;
b.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});
a=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");c="/plugins/flash/FlashPlugin.swf";c=[Ext.Loader.getPath("Ext.data.Connection"),"../../plugins/flash/FlashPlugin.swf"].join("/");if(Ext.flashPluginPath){c=Ext.flashPluginPath;}Ext.Loader.loadScript({url:a,onLoad:function(){var e="11.4.0";
var g="playerProductInstall.swf";var d={};var h={};h.quality="high";h.bgcolor="#ffffff";h.allowscriptaccess="sameDomain";h.allowfullscreen="true";var f={};f.id="ext-flash-polyfill";f.name="polyfill";f.align="middle";swfobject.embedSWF(c,"ext-flash-polyfill","0","0",e,g,d,h,f);},onError:function(){Ext.raise("Could not load flash-loader file swfobject.js from "+flashLoader);
},scope:b});Ext.data.flash.BinaryXhr.flashPluginInjected=true;}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin();}var b=this;Ext.apply(b,a);b.requestHeaders={};
},abort:function(){var a=this;if(a.readyState==4){Ext.warn.log("Aborting a connection that's completed its transfer: "+this.url);return;}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return;}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);
delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId];},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c);});return a.join("\x0d\x0a");},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null;},open:function(f,c,d,a,b){var e=this;
e.method=f;e.url=c;e.async=d!==false;e.user=a;e.password=b;if(!e.async){Ext.raise("Binary posts are only supported in async mode: "+c);}if(e.method!="POST"){Ext.log.warn("Binary data can only be sent as a POST request: "+c);}},overrideMimeType:function(a){this.mimeType=a;},send:function(a){var b=this;
b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b);}else{this.onFlashReady();}},onFlashReady:function(){var c=this,b,a;c.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(c);b={method:c.method,url:c.url,user:c.user,password:c.password,mimeType:c.mimeType,requestHeaders:c.requestHeaders,body:c.body,javascriptId:c.javascriptId};
a=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b);},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange();}},setRequestHeader:function(b,a){this.requestHeaders[b]=a;},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};
if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType;}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length;}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0;}else{Ext.raise("Unkown reason code in data: "+b.reason);
}}},onFlashStateChange:function(c,b){var a=this;if(c==4){a.parseData(b);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId];}a.setReadyState(c);}});