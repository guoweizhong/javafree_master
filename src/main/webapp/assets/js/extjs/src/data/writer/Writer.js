Ext.define("Ext.data.writer.Writer",{mixins:["Ext.mixin.Factoryable"],alias:"writer.base",factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a);
},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a};}return a.fn.bind(a.scope||this);}return a;},write:function(e){var c=e.getOperation(),b=c.getRecords()||[],a=b.length,f=[],d;for(d=0;d<a;d++){f.push(this.getRecordData(b[d],c));}return this.writeRecords(e,f);},writeRecords:Ext.emptyFn,getRecordData:function(i,g){var l=this,e=l.getNameProperty(),a=e!=="name",c=i.self.idField,p=c[e]||c.name,o=i.id,d=l.getWriteAllFields(),k,b,f,q,n,j,h,m;
if(c.serialize){o=c.serialize(o);}if(!d&&g&&g.isDestroyOperation){k={};k[p]=o;}else{b=l.getDateFormat();f=i.phantom;q=(f||d)?l.getAllDataOptions():l.getPartialDataOptions();n=f&&l.getClientIdProperty();j=i.getFieldsMap();q.serialize=false;h=i.getData(q);k=a?{}:h;if(n){k[n]=o;delete h[p];}else{if(!l.getWriteRecordId()){delete h[p];
}}for(p in h){o=h[p];if(!(m=j[p])){if(a){k[p]=o;}}else{if(m.isDateField&&b&&Ext.isDate(o)){o=Ext.Date.format(o,b);}else{if(m.serialize){o=m.serialize(o,i);}}if(a){p=m[e]||p;}k[p]=o;}}}return k;}});