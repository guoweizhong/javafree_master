Ext.define("Ext.data.proxy.Direct",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],config:{paramOrder:undefined,paramsAsHash:true,directFn:undefined,api:undefined,metadata:undefined},paramOrderRe:/[\s,|]/,constructor:function(a){this.callParent([a]);
this.canceledOperations={};},applyParamOrder:function(a){if(Ext.isString(a)){a=a.split(this.paramOrderRe);}return a;},updateApi:function(){this.methodsResolved=false;},updateDirectFn:function(){this.methodsResolved=false;},resolveMethods:function(){var c=this,b=c.getDirectFn(),a=c.getApi(),d;if(b){c.setDirectFn(d=Ext.direct.Manager.parseMethod(b));
if(!Ext.isFunction(d)){Ext.raise("Cannot resolve directFn "+b);}}if(a){a=Ext.direct.Manager.resolveApi(a,c);c.setApi(a);}c.methodsResolved=true;},doRequest:function(d){var h=this,a,e,c,b,g,f,i,j;if(!h.methodsResolved){h.resolveMethods();}e=h.buildRequest(d);c=e.getAction();f=h.getApi();if(f){i=f[c];}i=i||h.getDirectFn();
if(!i||!i.directCfg){Ext.raise({msg:'No Ext Direct function specified for Direct proxy "'+c+'" operation',proxy:h});}if(!h.paramOrder&&i.directCfg.method.len>1){Ext.raise({msg:'Incorrect parameters for Direct proxy "'+c+'" operation',proxy:h});}a=h.getWriter();if(a&&d.allowWrite()){e=a.write(e);}if(c==="read"){b=e.getParams();
}else{b=e.getJsonData();}g=i.directCfg.method.getArgs({params:b,allowSingle:a.getAllowSingle(),paramOrder:h.getParamOrder(),paramsAsHash:h.getParamsAsHash(),paramsAsArray:true,metadata:h.getMetadata(),callback:h.createRequestCallback(e,d),scope:h});e.setConfig({args:g,directFn:i});i.apply(window,g);return e;
},abort:function(a){var b;if(a&&a.isDataRequest){a=a.getOperation();}if(a&&a.isOperation){b=a.id;}if(b!=null){this.canceledOperations[b]=true;}},applyEncoding:Ext.identityFn,createRequestCallback:function(c,a){var b=this;return function(e,d){if(!b.canceledOperations[a.id]){b.processResponse(d.status,a,c,d);
}delete b.canceledOperations[a.id];};},extractResponseData:function(a){return Ext.isDefined(a.result)?a.result:a.data;},setException:function(b,a){b.setException(a.message);},buildUrl:function(){return"";}});