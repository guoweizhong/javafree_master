Ext.define("Ext.app.ViewController",{extend:"Ext.app.BaseController",alias:"controller.controller",requires:["Ext.app.domain.View"],mixins:["Ext.mixin.Factoryable"],isViewController:true,factoryConfig:{type:"controller"},config:{bindings:{$value:null,lazy:true},closeViewAction:"destroy"},view:null,constructor:function(a){this.compDomain=new Ext.app.domain.View(this);
this.callParent([a]);},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var d=this,e=d.compDomain,f,a,c;if(d.$hasBinds){f=d.getBindings();for(c in f){a=f[c];if(a){a.destroy();}}}if(e){e.unlisten(d);e.destroy();}d.compDomain=d.view=null;d.callParent();},closeView:function(){var a=this.getView(),b;
if(a){b=this.getCloseViewAction();a[b]();}},control:function(a,b){var c=a;if(Ext.isString(a)){c={};c[a]=b;}this.compDomain.listen(c,this);},listen:function(c,a){var b=c.component;if(b){c=Ext.apply({},c);delete c.component;this.control(b);}this.callParent([c,a]);},applyId:function(a){if(!a){a=Ext.id(null,"controller-");
}return a;},getReferences:function(){var a=this.view;return a&&a.getReferences();},getView:function(){return this.view;},lookup:function(b){var a=this.view;return a&&a.lookup(b);},lookupReference:function(a){return this.lookup(a);},getSession:function(){var a=this.view;return a&&a.lookupSession();},getViewModel:function(){var a=this.view;
return a&&a.lookupViewModel();},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null;},fireViewEvent:function(e,f){var d=this.view,b=false,c=arguments;if(d){if(d!==f){c=Ext.Array.slice(c);c.splice(1,0,d);}b=d.fireEvent.apply(d,c);}return b;},applyBindings:function(h){if(!h){return null;
}var e=this,c=e.getViewModel(),g=e.getBindTemplateScope(),a,d,f;e.$hasBinds=true;if(!c){Ext.raise("Cannot use bind config without a viewModel");}for(d in h){f=h[d];a=null;if(f){a=c.bind(f,d,e);a.getTemplateScope=g;}h[d]=a;}return h;},privates:{view:null,attachReference:function(b){var a=this.view;if(a){a.attachReference(b);
}},getBindTemplateScope:function(){return this.scope;},initBindings:function(){this.getBindings();},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a);}}}});