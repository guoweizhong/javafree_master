Ext.define("Ext.mixin.Selectable",{extend:"Ext.Mixin",mixinConfig:{id:"selectable",after:{updateStore:"updateStore"}},config:{disableSelection:null,mode:"SINGLE",allowDeselect:false,lastSelected:null,lastFocused:null,deselectOnContainerClick:true,selected:true,pruneRemoved:true,selection:null,twoWayBindable:{selection:1},publishes:{selection:1}},modes:{SINGLE:true,SIMPLE:true,MULTI:true},onNavigate:function(a){},selectableEventHooks:{add:"onSelectionStoreAdd",remove:"onSelectionStoreRemove",update:"onSelectionStoreUpdate",clear:{fn:"onSelectionStoreClear",priority:1000},load:"refreshSelection",refresh:"refreshSelection"},initSelectable:function(){this.publishState("selection",this.getSelection());
},applySelected:function(a){if(!a.isCollection){a=new Ext.util.Collection(a);}a.addObserver(this);return a;},applyMode:function(a){a=a?a.toUpperCase():"SINGLE";return this.modes[a]?a:"SINGLE";},updateStore:function(a,c){var b=this,d=Ext.apply({},b.selectableEventHooks,{scope:b});if(c&&Ext.isObject(c)&&c.isStore){if(c.autoDestroy){c.destroy();
}else{c.un(d);}}if(a){a.on(d);b.refreshSelection();}},selectAll:function(a){var c=this,b=c.getStore().getRange();c.select(b,true,a);},deselectAll:function(b){var a=this;a.deselect(a.getSelected().getRange(),b);a.setLastSelected(null);a.setLastFocused(null);},updateSelection:function(a){if(this.changingSelection){return;
}if(a){this.select(a);}else{this.deselectAll();}},selectWithEvent:function(a){var c=this,b=c.isSelected(a);switch(c.getMode()){case"MULTI":case"SIMPLE":if(b){c.deselect(a);}else{c.select(a,true);}break;case"SINGLE":if(c.getAllowDeselect()&&b){c.deselect(a);}else{c.select(a,false);}break;}},selectRange:function(c,g,h){var f=this,b=f.getStore(),a=[],e,d;
if(f.getDisableSelection()){return;}if(c>g){e=g;g=c;c=e;}for(d=c;d<=g;d++){a.push(b.getAt(d));}this.doMultiSelect(a,h);},select:function(c,e,b){var d=this,a;if(d.getDisableSelection()){return;}if(typeof c==="number"){c=[d.getStore().getAt(c)];}if(!c){return;}if(d.getMode()=="SINGLE"&&c){a=c.length?c[0]:c;
d.doSingleSelect(a,b);}else{d.doMultiSelect(c,e,b);}},doSingleSelect:function(a,b){this.doMultiSelect([a],false,b);},doMultiSelect:function(b,k,j){if(b===null||this.getDisableSelection()){return;}b=!Ext.isArray(b)?[b]:b;var g=this,c=g.getSelected(),l=c.getCount(),a=[],f=b.length,h=false,d=0,e;if(!k&&l){a=c.getRange();
}for(d=0;d<f;d++){e=b[d];if(typeof e==="number"){b[d]=store.getAt(e);}}c.suppressEvent=j;c.splice(l,a,b);c.suppressEvent=false;},deselect:function(e,d){var h=this;if(h.getDisableSelection()){return;}e=Ext.isArray(e)?e:[e];var g=h.getSelected(),c=h.getStore(),a=e.length,f,b;for(f=0;f<a;f++){b=e[f];if(typeof b==="number"){e[f]=c.getAt(b);
}}g.suppressEvent=d;g.remove(e);g.suppressEvent=false;},onCollectionRemove:function(e,b){var c=this,d=c.getLastSelected(),a=b.items;if(d&&!e.contains(d)){c.setLastSelected(e.last());}c.onItemDeselect(a,e.suppressEvent);if(!e.suppressEvent){c.fireSelectionChange(a);}},onCollectionAdd:function(d,c){var b=this,a=c.items;
b.setLastSelected(d.last());b.onItemSelect(a,d.suppressEvent);if(!d.suppressEvent){b.fireSelectionChange(a);}},updateLastFocused:function(b,a){this.onLastFocusChanged(a,b);},fireSelectionChange:function(a){var b=this;b.changingSelection=true;b.setSelection(b.getLastSelected()||null);b.changingSelection=false;
b.fireAction("selectionchange",[b,a],"getSelections");},getSelections:function(){return this.getSelected().getRange();},isSelected:function(a){a=Ext.isNumber(a)?this.getStore().getAt(a):a;return this.getSelected().indexOf(a)!==-1;},hasSelection:function(){return this.getSelected().getCount()>0;},refreshSelection:function(){var k=this,e=k.getSelected(),c=e.getRange(),g=c.length,j=k.getStore().getData(),b=[],h=[],f,d,a;
if(k.getPruneRemoved()){j=j.getSource()||j;for(f=0;f<g;f++){d=c[f];a=j.get(j.getKey(d));if(a){if(a!==d){b.push(d);h.push(a);}}else{b.push(d);}}}e.suppressEvent=true;e.splice(e.getCount(),b,h);e.suppressEvent=false;},onSelectionStoreRemove:function(c,b){var g=this,e=g.getSelected(),f=b.length,h,a,d;if(g.getDisableSelection()){return;
}for(d=0;d<f;d++){a=b[d];if(e.remove(a)){if(g.getLastSelected()==a){g.setLastSelected(null);}if(g.getLastFocused()==a){g.setLastFocused(null);}h=h||[];h.push(a);}}if(h){g.fireSelectionChange([h]);}},onSelectionStoreClear:function(b){var a=b.getData().items;this.onSelectionStoreRemove(b,a);},getSelectionCount:function(){return this.getSelected().getCount();
},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onLastFocusChanged:Ext.emptyFn,onEditorKey:Ext.emptyFn},function(){});