Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,referencesDirty:true,referenceRepairs:0,typeName:"xtype",constructor:function(a){var b=this;Ext.apply(b,a);b.all={};b.byInstanceId={};b.holders={};b.names={};b.references={};b.onAvailableCallbacks={};},create:function(a,b){if(typeof a==="string"){return Ext.widget(a);
}if(a.isComponent){return a;}if("xclass" in a){return Ext.create(a.xclass,a);}return Ext.widget(a.xtype||b,a);},get:function(a){return this.all[a];},register:function(a){var c=this,d=a.getId(),b=c.onAvailableCallbacks;if(d===undefined){Ext.raise("Component id is undefined. Please ensure the component has an id.");
}if(d in c.all){Ext.raise('Duplicate component id "'+d+'"');}if(a.$iid in c.byInstanceId){Ext.raise('Duplicate component instance id "'+a.$iid+'"');}c.all[d]=a;c.byInstanceId[a.$iid]=a;if(a.reference){c.references[d]=a;}if(a.name&&a.nameable){c.names[d]=a;}if(a.nameHolder||a.referenceHolder){c.holders[d]=a;
}++c.count;if(!c.hasFocusListener){c.installFocusListener();}b=b&&b[d];if(b&&b.length){c.notifyAvailable(a);}},unregister:function(a){var e=this,d=e.all,c=e.byInstanceId,h=e.holders,b=e.references,f=e.names,g=a.getId();if(g in h){h[g]=null;delete h[g];}if(g in f){f[g]=null;delete f[g];}if(g in b){b[g]=null;
delete b[g];}d[g]=null;delete d[g];g=a.$iid;c[g]=null;delete c[g];--e.count;},markReferencesDirty:function(){var b=this,c=b.holders,a;if(!b.referencesDirty){for(a in c){c[a].refs=c[a].nameRefs=null;}b.referencesDirty=true;}},fixReferences:function(){var c=this,b=c.references,d=c.names,a;if(c.referencesDirty){++c.referenceRepairs;
for(a in b){b[a]._fixReference();}for(a in d){d[a]._fixName();}c.referencesDirty=false;}},onAvailable:function(g,c,b){var f=this,e=f.onAvailableCallbacks,a=f.all,d;if(g in a){d=a[g];c.call(b||d,d);}else{if(g){if(!Ext.isArray(e[g])){e[g]=[];}e[g].push(function(h){c.call(b||h,h);});}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];
while(a.length){(a.shift())(b);}},each:function(b,a){return Ext.Object.each(this.all,b,a);},getCount:function(){return this.count;},getAll:function(){return Ext.Object.getValues(this.all);},getActiveComponent:function(){return Ext.Component.from(Ext.dom.Element.getActiveElement());},onGlobalFocus:function(h){var d=this,c=h.event,g=c.toComponent=Ext.Component.from(h.toElement),a=c.fromComponent=Ext.Component.from(h.fromElement),b=d.getCommonAncestor(a,g),f;
if(g!==a){if(a&&!a.destroyed&&!a.isDestructing()){if(a.handleBlurEvent){a.handleBlurEvent(h);}for(f=a;f&&f!==b;f=f.getRefOwner()){if(!(f.destroyed||f.destroying)){h.type="focusleave";f.onFocusLeave(c);}}}if(g&&!g.destroyed&&!g.isDestructing()){if(g.handleFocusEvent){g.handleFocusEvent(h);}for(f=g;f&&f!==b;
f=f.getRefOwner()){h.type="focusenter";f.onFocusEnter(c);}}}for(f=b;f;f=f.getRefOwner()){if(!(f.destroying||f.destroyed)){f.onFocusMove(h);}}},getCommonAncestor:function(b,a){if(b===a){return b;}while(b&&!(b.isAncestor(a)||b===a)){b=b.getRefOwner();}return b;},privates:{installFocusListener:function(){var a=this;
Ext.on("focus",a.onGlobalFocus,a);a.hasFocusListener=true;},clearAll:function(){this.all={};this.names={};this.references={};this.onAvailableCallbacks={};},from:function(b,d,c){if(b&&b.isEvent){b=b.target;}var g=Ext.getDom(b),a=this.all,e=0,i,f,h;if(typeof d!=="number"){i=Ext.getDom(d);d=Number.MAX_VALUE;
}while(g&&g.nodeType===1&&e<d&&g!==i){f=g.getAttribute("data-componentid")||g.id;if(f){h=a[f];if(h&&(!c||Ext.ComponentQuery.is(h,c))){return h;}e++;}g=g.parentNode;}return null;}}},function(){var a=Ext.ComponentManager;a.fromElement=a.from;Ext.getCmp=function(b){return a.get(b);};Ext.iidToCmp=function(b){return a.byInstanceId[b]||null;
};Ext.doEv=function(d,f){var c,g,b;c=Ext.Component.from(f.target);if(c&&!c.destroying&&!c.destroyed&&c.getEventHandlers){g=c.getEventHandlers()[f.type];if(g&&c[g]){b=new Ext.event.Event(f);return c[g](b);}}return true;};});