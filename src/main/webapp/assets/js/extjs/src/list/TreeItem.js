Ext.define("Ext.list.TreeItem",{extend:"Ext.list.AbstractTreeItem",xtype:"treelistitem",collapsedCls:Ext.baseCSSPrefix+"treelist-item-collapsed",expandedCls:Ext.baseCSSPrefix+"treelist-item-expanded",floatedToolCls:Ext.baseCSSPrefix+"treelist-item-tool-floated",leafCls:Ext.baseCSSPrefix+"treelist-item-leaf",expandableCls:Ext.baseCSSPrefix+"treelist-item-expandable",hideIconCls:Ext.baseCSSPrefix+"treelist-item-hide-icon",loadingCls:Ext.baseCSSPrefix+"treelist-item-loading",selectedCls:Ext.baseCSSPrefix+"treelist-item-selected",selectedParentCls:Ext.baseCSSPrefix+"treelist-item-selected-parent",withIconCls:Ext.baseCSSPrefix+"treelist-item-with-icon",hoverCls:Ext.baseCSSPrefix+"treelist-item-over",rowHoverCls:Ext.baseCSSPrefix+"treelist-row-over",isTreeListItem:true,config:{rowCls:null},rowClsProperty:"rowCls",element:{reference:"element",tag:"li",cls:Ext.baseCSSPrefix+"treelist-item",children:[{reference:"rowElement",cls:Ext.baseCSSPrefix+"treelist-row",children:[{reference:"wrapElement",cls:Ext.baseCSSPrefix+"treelist-item-wrap",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"treelist-item-icon"},{reference:"textElement",cls:Ext.baseCSSPrefix+"treelist-item-text"},{reference:"expanderElement",cls:Ext.baseCSSPrefix+"treelist-item-expander"}]}]},{reference:"itemContainer",tag:"ul",cls:Ext.baseCSSPrefix+"treelist-container"},{reference:"toolElement",cls:Ext.baseCSSPrefix+"treelist-item-tool"}]},constructor:function(a){this.callParent([a]);
var b=this.toolElement.dom;b.parentNode.removeChild(b);},getToolElement:function(){return this.toolElement;},insertItem:function(b,a){if(a){b.element.insertBefore(a.element);}else{this.itemContainer.appendChild(b.element);}},isSelectionEvent:function(b){var a=this.getOwner();return(!this.isToggleEvent(b)||!a.getExpanderOnly()||a.getSelectOnExpander());
},isToggleEvent:function(b){var a=false;if(this.getOwner().getExpanderOnly()){a=b.target===this.expanderElement.dom;}else{a=!this.itemContainer.contains(b.target);}return a;},nodeCollapseBegin:function(d,e){var c=this,b=c.itemContainer,a;if(c.expanding){c.stopAnimation(c.expanding);}a=d&&b.getHeight();
c.callParent([d,e]);if(d){b.dom.style.display="block";c.collapsingForExpand=e;c.collapsing=this.runAnimation(Ext.merge({from:{height:a},to:{height:0},callback:c.nodeCollapseDone,scope:c},d));}},nodeCollapseDone:function(c){var b=this,a=b.itemContainer;if(!b.destroying&&!b.destroyed){b.collapsing=null;
a.dom.style.display="";a.setHeight(null);b.nodeCollapseEnd(b.collapsingForExpand);}},nodeExpandBegin:function(d){var c=this,b=c.itemContainer,a;if(c.collapsing){c.stopAnimation(c.collapsing);}c.callParent([d]);if(d){a=b.getHeight();b.setHeight(0);c.expanding=c.runAnimation(Ext.merge({to:{height:a},callback:c.nodeExpandDone,scope:c},d));
}},nodeExpandDone:function(){this.expanding=null;this.itemContainer.setHeight(null);this.nodeExpandEnd();},removeItem:function(a){this.itemContainer.removeChild(a.element);},updateNode:function(a,b){this.syncIndent();this.callParent([a,b]);},updateExpandable:function(a){var b=this.getNode();this.updateExpandCls();
if(b){b.set("expandable",a);}},updateExpanded:function(a){var b=this.getNode();this.updateExpandCls();if(b){b.set("expanded",a);}},updateIconCls:function(b,a){var d=this,c=d.element;d.doIconCls(d.iconElement,b,a);d.doIconCls(d.toolElement,b,a);c.toggleCls(d.withIconCls,!!b);c.toggleCls(d.hideIconCls,b===null);
},updateLeaf:function(a){this.element.toggleCls(this.leafCls,a);},updateLoading:function(a){this.element.toggleCls(this.loadingCls,a);},updateOver:function(b){var a=this;a.element.toggleCls(a.hoverCls,!!b);a.rowElement.toggleCls(a.rowHoverCls,b>1);},updateRowCls:function(b,a){this.rowElement.replaceCls(a,b);
},updateSelected:function(c,e){var d=this,a=d.selectedCls,b=d.getToolElement();d.callParent([c,e]);d.element.toggleCls(a,c);if(b){b.toggleCls(a,c);}},updateSelectedParent:function(b){var c=this;c.element.toggleCls(c.selectedParentCls,b);var a=c.getToolElement();if(a){a.toggleCls(c.selectedCls,b);}},updateText:function(a){this.textElement.update(a);
},privates:{doNodeUpdate:function(a){this.callParent([a]);this.setRowCls(a&&a.data[this.rowClsProperty]);},doIconCls:function(c,b,a){if(a){c.removeCls(a);}if(b){c.addCls(b);}},syncIndent:function(){var c=this,a=c.getIndent(),b=c.getNode(),d;if(b){d=b.data.depth-1;c.wrapElement.dom.style.marginLeft=(d*a)+"px";
}},updateExpandCls:function(){if(!this.updatingExpandCls){var e=this,c=e.getExpandable(),d=e.element,b=e.getExpanded(),a=e.expandedCls,f=e.collapsedCls;e.updatingExpandCls=true;d.toggleCls(e.expandableCls,c);if(c){d.toggleCls(a,b);d.toggleCls(f,!b);}else{d.removeCls([a,f]);}e.updatingExpandCls=false;
}},updateIndent:function(b,a){this.syncIndent();this.callParent([b,a]);}}},function(a){a.prototype.floatedCls=[Ext.Widget.prototype.floatedCls,Ext.baseCSSPrefix+"treelist-item-floated"];});