Ext.define("Ext.util.Region",function(){var b=Ext.util,l=/([^\?!]*)(!|\?)?$/,j=/^(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br))(?:-(?:(?:([trbl])(\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br)))?$/i,f={l:0,r:100,t:0,b:100,c:50},h={l:100,r:0,t:0,b:100,c:50},o={b:0,l:1,t:2,r:3},k={"tl-tr":"l0-r0","tl-r":"l0-r50","bl-r":"l100-r50","bl-br":"l100-r100","tr-tl":"r0-l0","tr-l":"r0-l50","br-l":"r100-l50","br-bl":"r100-l100"},a={"tl-tr":"r0-l0","tl-r":"r0-l50","bl-r":"r100-l50","bl-br":"r100-l100","tr-tl":"l0-r0","tr-l":"l0-r50","br-l":"l100-r50","br-bl":"l100-r100"},i=[],c=new b.Offset(0,0),m=function(t){var u=b.Region,s=typeof t,w,r,q,v;
if(t==null){return u.EMPTY;}if(t.isRegion){return t;}if(t.isElement||t.nodeType===1){return this.getRegion(t);}if(s==="string"){t=t.split(" ");switch(t.length){case 1:t[1]=t[2]=t[3]=t[0];break;case 2:t[2]=t[0];t[3]=t[1];break;case 3:t[3]=t[1];}w=parseInt(t[0],10)||0;r=parseInt(t[1],10)||0;q=parseInt(t[2],10)||0;
v=parseInt(t[3],10)||0;}else{if(s==="number"){w=r=q=v=t;}else{if(typeof t.x==="number"){w=t.y;v=t.x;if(typeof t.right==="number"){r=t.right;q=t.bottom;}else{r=v+t.width;q=w+t.height;}}else{Ext.raise("Not convertible to a Region: "+t);}}}return new u(w,r,q,v);},e=[-1,1,1,-1],n=function(s,r,q){if(q!=null&&r){i[0]=i[1]=i[2]=i[3]=0;
i[q]=r.y*e[q];s=b.Region.from(s);s.adjust.apply(s,i);}return s;},g=function(z,F,s,A,t){var r=Math.ceil(A.x),E=Math.ceil(r/2)+3,v,C,q,u,w,D,B;if(t&&!t.intersect(z)){return;}if(s!=null){if(s&1){if(F.getHeight()<r+4){return;}v=z.top+E-F.height;C=z.bottom-E-1;F.setPosition(F.x,Math.min(Math.max(F.y,v),C));
v=F.top+2;C=F.bottom-(r+2);u=s===3;D=u?F.right:F.left;w=new b.Region(Math.max(F.top,z.top),D,Math.min(F.bottom,z.bottom),D);q=new b.Region(0,0,0,0).setWidth(A.y).setHeight(r).alignTo({target:w,align:u?"l-r":"r-l",overlap:true});q.setPosition(q.x,Math.min(Math.max(q.y,v),C));q.position=u?"right":"left";
}else{if(F.getWidth()<r+4){return;}v=z.left+E-F.width;C=z.right-E-1;F.setPosition(Math.min(Math.max(F.x,v),C),F.y);v=F.left+2;C=F.right-(r+2);u=s===0;B=u?F.bottom:F.top;w=new b.Region(B,Math.min(F.right,z.right),B,Math.max(F.left,z.left));q=new b.Region(0,0,0,0).setWidth(r).setHeight(A.y).alignTo({target:w,align:u?"t-b":"b-t",overlap:true});
q.setPosition(Math.min(Math.max(q.x,v),C),q.y);q.position=u?"bottom":"top";}if(t&&!t.contains(q)){return;}F.anchor=q;F.anchor.align=s;}},p=function(t,r,u,q){var s;if(t&&q){if(r.top>=u.bottom&&r.bottom>q.bottom){r.setHeight(Math.max(r.getHeight()+q.bottom-r.bottom,t));r.constrainHeight=true;}else{if(r.bottom<=u.top&&r.top<q.top){s=Math.max(r.getHeight()+r.top-q.top,t);
r.adjust(r.getHeight()-s);r.constrainHeight=true;}else{if(r.getHeight()>q.getHeight()){r.setHeight(Math.max(t,q.getHeight()));r.setPosition(r.x,0);r.constrainHeight=true;}}}}},d=function(s,r,u,q){var t;if(s&&q){if(r.left>=u.right&&r.right>q.right){r.setWidth(Math.max(r.getWidth()+q.right-r.right,s));
r.constrainWidth=true;}else{if(r.right<=u.left&&r.left<q.left){t=Math.max(r.getWidth()+r.left-q.left,s);r.adjust(0,0,0,r.getWidth()-t);r.constrainWidth=true;}else{if(r.getWidth()>q.getWidth()){r.setWidth(Math.max(s,q.getWidth()));r.setPosition(0,r.y);r.constrainWidth=true;}}}}};return{requires:["Ext.util.Offset"],isRegion:true,statics:{getRegion:function(q){return Ext.fly(q).getRegion();
},from:function(q){return new this(q.top,q.right,q.bottom,q.left);},getAlignInfo:function(v,t){if(typeof v==="object"){return v;}v=v?((v.indexOf("-")<0)?"tl-"+v:v):"tl-bl";u=l.exec(v);v=u[1];v=(t?a:k)[v]||v;var s=t?h:f,u,r=j.exec(v),q;if(!r){Ext.raise({sourceClass:"Ext.util.Region",sourceMethod:"getAlignInfo",position:v,msg:'Attemmpted to align an element with an invalid position: "'+v+'"'});
}q={myEdge:r[1],myOffset:r[2],otherEdge:r[4],otherOffset:r[5],constrain:u[2]};if(r[3]){q.myEdge=r[3][0];q.myOffset=s[r[3][1]];if(q.myOffset==null){q.myOffset=50;}}if(r[6]){q.otherEdge=r[6][0];q.otherOffset=s[r[6][1]];if(q.otherOffset==null){q.otherOffset=50;}}q.position=o[q.myEdge];return q;}},constructor:function(u,r,q,t){var s=this;
s.y=s.top=s[1]=u;s.right=r;s.bottom=q;s.x=s.left=s[0]=t;s.height=s.bottom-s.top;s.width=s.right-s.left;},setPosition:function(q,r){if(arguments.length===1){r=q[1];q=q[0];}return this.translateBy(q-this.x,r-this.y);},contains:function(r){var q=this;return(r.x>=q.x&&(r.right||r.x)<=q.right&&r.y>=q.y&&(r.bottom||r.y)<=q.bottom);
},intersect:function(x){var w=this,u=Math.max(w.y,x.y),v=Math.min(w.right,x.right),q=Math.min(w.bottom,x.bottom),s=Math.max(w.x,x.x);if(q>u&&v>s){return new this.self(u,v,q,s);}else{return false;}},union:function(x){var w=this,u=Math.min(w.y,x.y),v=Math.max(w.right,x.right),q=Math.max(w.bottom,x.bottom),s=Math.min(w.x,x.x);
return new this.self(u,v,q,s);},constrainTo:function(r){var q=this,s=Ext.Number.constrain;q.top=q.y=s(q.top,r.y,r.bottom);q.bottom=s(q.bottom,r.y,r.bottom);q.left=q.x=s(q.left,r.x,r.right);q.right=s(q.right,r.x,r.right);q.height=q.bottom-q.top;q.width=q.right-q.left;return q;},adjust:function(u,r,q,t){var s=this;
s.top=s.y+=u||0;s.left=s.x+=t||0;s.right+=r||0;s.bottom+=q||0;s.height=s.bottom-s.top;s.width=s.right-s.left;return s;},getOutOfBoundOffset:function(q,r){if(!Ext.isObject(q)){if(q==="x"){return this.getOutOfBoundOffsetX(r);}else{return this.getOutOfBoundOffsetY(r);}}else{r=q;var s=new b.Offset();s.x=this.getOutOfBoundOffsetX(r.x);
s.y=this.getOutOfBoundOffsetY(r.y);return s;}},getOutOfBoundOffsetX:function(q){if(q<=this.x){return this.x-q;}else{if(q>=this.right){return this.right-q;}}return 0;},getOutOfBoundOffsetY:function(q){if(q<=this.y){return this.y-q;}else{if(q>=this.bottom){return this.bottom-q;}}return 0;},isOutOfBound:function(q,r){if(!Ext.isObject(q)){if(q==="x"){return this.isOutOfBoundX(r);
}else{return this.isOutOfBoundY(r);}}else{r=q;return(this.isOutOfBoundX(r.x)||this.isOutOfBoundY(r.y));}},isOutOfBoundX:function(q){return(q<this.x||q>this.right);},isOutOfBoundY:function(q){return(q<this.y||q>this.bottom);},restrict:function(r,t,q){if(Ext.isObject(r)){var s;q=t;t=r;if(t.copy){s=t.copy();
}else{s={x:t.x,y:t.y};}s.x=this.restrictX(t.x,q);s.y=this.restrictY(t.y,q);return s;}else{if(r==="x"){return this.restrictX(t,q);}else{return this.restrictY(t,q);}}},restrictX:function(r,q){if(!q){q=1;}if(r<=this.x){r-=(r-this.x)*q;}else{if(r>=this.right){r-=(r-this.right)*q;}}return r;},restrictY:function(r,q){if(!q){q=1;
}if(r<=this.y){r-=(r-this.y)*q;}else{if(r>=this.bottom){r-=(r-this.bottom)*q;}}return r;},alignTo:function(s){var G=this,r=G.self,t=b.Offset,H=m(s.target),y,v=s.rtl,q=s.overlap,D=s.align,B=s.anchorSize,x=s.offset,F=s.inside,I=s.position,z=s.allowXTranslate,E=s.allowYTranslate,w,A,C,u;if(x){x=t.fromObject(x);
if(!(x instanceof t)){Ext.raise("offset option must be an Ext.util.Offset");}}if(B){B=t.fromObject(B);if(!(B instanceof t)){Ext.raise("anchorSize option must be an Ext.util.Offset");}}if(F&&!F.isRegion){F=Ext.fly(F).getRegion();}if(I){if(I.length===2){I=new b.Point(I[0],I[1]);}A=new r().copyFrom(G).setPosition(I.x,I.y);
}else{D=G.getAlignInfo(D,v);if(F){if(H.x>=F.right){H.setPosition(F.right-1,H.y);if(D.position!==3){D=G.getAlignInfo("r-l",v);}}else{if(H.right<F.x){H.setPosition(F.x-H.getWidth()+1,H.y);if(D.position!==1){D=G.getAlignInfo("l-r",v);}}}if(H.y>=F.bottom){H.setPosition(H.x,F.bottom-1);if(D.position!==0){D=G.getAlignInfo("b-t",v);
}}else{if(H.bottom<F.y){H.setPosition(H.x,F.y-H.getHeight()+1);if(D.position!==2){D=G.getAlignInfo("t-b",v);}}}}y=B?n(H,B,D.position):H;A=r.from(G).translateBy(G.getAlignToVector(y,D));q=!!A.intersect(y);if(x&&(q||!B)){A.translateBy(x);}if(B){g(H,A,D.position,B,F);}}if(F){C=A.copy();if(A.left<F.left){A.translateBy(F.left-A.left,0);
w=true;}if(A.right>F.right&&A.left>F.left){A.translateBy(F.right-A.right,0);w=true;}if(A.top<F.top){A.translateBy(0,F.top-A.top);w=true;}if(A.bottom>F.bottom&&A.top>F.top){A.translateBy(0,F.bottom-A.bottom);w=true;}if(w&&!q){A.anchor=null;if(s.axisLock){if(D.position&1){E=false;}else{z=false;}}if(I){if(A.contains(I)){I.exclude(A,{inside:F,centerOnSideChange:false});
}}else{u=A.copy();if(A.intersect(y)){D.position=H.exclude(A,{initialPosition:C,defaultPosition:D.position,inside:F,minHeight:s.minHeight,minWidth:s.minWidth,allowX:z,allowY:E,offset:x,anchorHeight:B?B.y:0,centerOnSideChange:!!B});}else{if(s.minWidth&&A.getWidth()>F.getWidth()){A.setPosition(0,A.y);A.setWidth(Math.max(F.getWidth(),s.minWidth));
A.constrainWidth=true;}else{if(s.minHeight&&A.getHeight()>F.getHeight()){A.setPosition(A.x,0);A.setHeight(Math.max(F.getHeight(),s.minHeight));A.constrainHeight=true;}}}A.align=D;if(F.contains(A)){if(B){g(H,A,D.position,B,F);}}else{A=u;}}}}return A;},exclude:function(w,r){r=r||{};var L=this,G=r.initialPosition||w,J=r.inside,s=r.defaultPosition,q=r.centerOnSideChange,y=r.minHeight,C=r.minWidth,E=r.allowX!==false,D=r.allowY!==false,K=r.anchorHeight,x=r.offset,u=[],F,B,I,v,H,z,A;
if(!x){x=c;}if(D){u.push([0,L.top-w.bottom-K+x.y,"b-t",0,Math.abs(L.top-G.bottom-K+x.y)]);u.push([0,L.bottom-w.top+K+x.y,"t-b",2,Math.abs(L.bottom-G.top+K+x.y)]);}else{q=false;}if(E){u.push([L.left-w.right-K+x.x,0,"r-l",3,Math.abs(L.left-G.right-K+x.x)]);u.push([L.right-w.left+K+x.x,0,"l-r",1,Math.abs(L.right-G.left+K+x.x)]);
}else{q=false;}Ext.Array.sort(u,function(M,N){var t=M[4]-N[4];if(!t){if(M[3]===s){return -1;}if(N[3]===s){return 1;}}return t;});if(J){for(I=0;I<u.length;I++){B=u[I];F=b.Region.from(w);F.translateBy.apply(F,B);if(J.contains(F)){w.copyFrom(F);A={align:B[2],position:B[3],distance:B[4]};break;}if(y){p(y,F,L,J);
if(J.contains(F)){if(!v||F.getArea()>v.region.getArea()){v={region:F,align:B[2],position:B[3],distance:B[4]};}}}if(C){d(C,F,L,J);if(J.contains(F)){if(!v||F.getArea()>v.region.getArea()){v={region:F,align:B[2],position:B[3],distance:B[4]};}}}z=J.intersect(F);if(z){z=z.getArea();if(!H||(z&&H.area<z)){H={region:F,align:B[2],position:B[3],distance:B[4],area:z};
}}}if(!A){if(v){w.copyFrom(v.region);A=v;w.constrainWidth=v.region.constrainWidth;w.constrainHeight=v.region.constrainHeight;}else{if(H){w.copyFrom(H.region);A=H;}}}if(A){if((A.position&1)!==(s&1)){if(A.distance&&q){B=w.alignTo({align:A.align,target:L,anchorSize:K,offset:x,axisLock:true,inside:J,minHeight:r.minHeight,minWidth:r.minWidth});
if(J.contains(B)){w.setPosition(B.x,B.y);}}}return A.position;}}else{w.translateBy.apply(w,u[0]);return u[0][3];}return s;},getAlignToXY:function(s,t,r){var q=this.getAlignToVector(s,t,r);return[this.x+q[0],this.y+q[1]];},getAnchorPoint:function(r,q){r=(typeof r==="string")?this.getAlignInfo(r+"-tl",q):r;
return this["getAnchorPoint_"+r.myEdge](r.myOffset);},getAlignToVector:function(t,u,s){u=(typeof u==="string")?this.getAlignInfo(u,s):u;var q=this["getAnchorPoint_"+u.myEdge](u.myOffset),r=t["getAnchorPoint_"+u.otherEdge](u.otherOffset);return[r[0]-q[0],r[1]-q[1]];},getAnchorPoint_t:function(q){return[this.x+Math.round(this.getWidth()*(q/100)),this.y];
},getAnchorPoint_b:function(q){return[this.x+Math.round(this.getWidth()*(q/100)),this.bottom];},getAnchorPoint_l:function(q){return[this.x,this.y+Math.round(this.getHeight()*(q/100))];},getAnchorPoint_r:function(q){return[this.right,this.y+Math.round(this.getHeight()*(q/100))];},getAnchorPoint_c:function(){return[this.x+Math.round(this.getWidth()/2),this.y+Math.round(this.getHeight()/2)];
},getCenter:function(){return[this.x+this.width/2,this.y+this.height/2];},getHeight:function(){return this.bottom-this.y;},getWidth:function(){return this.right-this.x;},getArea:function(){return this.getHeight()*this.getWidth();},setHeight:function(q){this.height=q;this.bottom=this.top+q;return this;
},setWidth:function(q){this.width=q;this.right=this.left+q;return this;},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y};},setSize:function(q,r){if(r===undefined){r=q;}this.setWidth(q);return this.setHeight(r);},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x);
},copyFrom:function(r){var q=this;q.top=q.y=q[1]=r.y;q.right=r.right;q.bottom=r.bottom;q.left=q.x=q[0]=r.x;return this;},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]";},translateBy:function(q,s){if(q.length){s=q[1];q=q[0];}else{if(arguments.length===1){s=q.y;
q=q.x;}}var r=this;r.top=r.y+=s;r.right+=q;r.bottom+=s;r.left=r.x+=q;return r;},round:function(){var q=this;q.top=q.y=Math.round(q.y);q.right=Math.round(q.right);q.bottom=Math.round(q.bottom);q.left=q.x=Math.round(q.x);return q;},equals:function(q){return(this.top===q.top&&this.right===q.right&&this.bottom===q.bottom&&this.left===q.left);
},getOffsetsTo:function(q){return{x:this.x-q.x,y:this.y-q.y};},highlight:function(){var q=Ext.getBody().createChild({style:"background-color:#52a0db;opacity:0.4;position:absolute"});q.setBox(this);setTimeout(function(){q.destroy();},5000);return q;}};},function(a){a.prototype.getAlignInfo=a.getAlignInfo;
a.EMPTY=new a(0,0,0,0);if(Object.freeze){Object.freeze(a.EMPTY);}});