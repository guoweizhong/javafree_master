Ext.define("Ext.util.Positionable",{mixinId:"positionable",_positionTopLeft:["position","top","left"],clippedCls:Ext.baseCSSPrefix+"clipped",afterSetPosition:Ext.emptyFn,getAnchorToXY:function(){Ext.raise("getAnchorToXY is not implemented in "+this.$className);},getBorderPadding:function(){Ext.raise("getBorderPadding is not implemented in "+this.$className);
},getLocalX:function(){Ext.raise("getLocalX is not implemented in "+this.$className);},getLocalXY:function(){Ext.raise("getLocalXY is not implemented in "+this.$className);},getLocalY:function(){Ext.raise("getLocalY is not implemented in "+this.$className);},getX:function(){Ext.raise("getX is not implemented in "+this.$className);
},getXY:function(){Ext.raise("getXY is not implemented in "+this.$className);},getY:function(){Ext.raise("getY is not implemented in "+this.$className);},setLocalX:function(){Ext.raise("setLocalX is not implemented in "+this.$className);},setLocalXY:function(){Ext.raise("setLocalXY is not implemented in "+this.$className);
},setLocalY:function(){Ext.raise("setLocalY is not implemented in "+this.$className);},setX:function(){Ext.raise("setX is not implemented in "+this.$className);},setXY:function(){Ext.raise("setXY is not implemented in "+this.$className);},setY:function(){Ext.raise("setY is not implemented in "+this.$className);
},adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1];}return c;},alignTo:function(c,a,f,b){var e=this,d=e.el;return e.setXY(e.getAlignToXY(c,a,f),d.anim&&!!b?d.anim(b):false);},calculateAnchorXY:function(a,e,d,b){var c=this.getRegion();c.setPosition(0,0);
c.translateBy(e||0,d||0);if(b){c.setWidth(b.width);c.setHeight(b.height);}return c.getAnchorPoint(a);},convertPositionSpec:function(a){return Ext.util.Region.getAlignInfo(a);},getAlignToXY:function(b,a,c){var d=this.getAlignToRegion(b,a,c);return[d.x,d.y];},getAlignToRegion:function(b,c,g,e){var d=this,a,f;
b=Ext.fly(b.el||b);if(!b||!b.dom){Ext.raise({sourceClass:"Ext.util.Positionable",sourceMethod:"getAlignToXY",msg:"Attempted to align an element that doesn't exist"});}c=d.convertPositionSpec(c);if(c.constrain){if(c.constrain==="!"){a=b;}else{a=d.constrainTo||d.container||d.el.parent();}a=Ext.fly(a.el||a).getConstrainRegion();
}f=d.getRegion().alignTo({target:b.getRegion(),inside:a,minHeight:e,offset:g,align:c,axisLock:true});return f;},getAnchorXY:function(b,d,c){var f=this,g=f.getRegion(),e=f.el,h=e.dom.nodeName==="BODY"||e.dom.nodeType===9,a=e.getScroll();if(d){g.setPosition(0,0);}else{if(h){g.setPosition(a.left,a.top);
}}if(c){g.setWidth(c.width);g.setHeight(c.height);}return g.getAnchorPoint(b);},getBox:function(d,g){var e=this,l=g?e.getLocalXY():e.getXY(),i=l[0],f=l[1],j,b,c,a,k;if(e.el.dom.nodeName==="BODY"||e.el.dom.nodeType===9){j=Ext.Element.getViewportWidth();b=Ext.Element.getViewportHeight();}else{j=e.getWidth();
b=e.getHeight();}if(d){c=e.getBorderPadding();a=c.beforeX;k=c.beforeY;i+=a;f+=k;j-=(a+c.afterX);b-=(k+c.afterY);}return{x:i,left:i,0:i,y:f,top:f,1:f,width:j,height:b,right:i+j,bottom:f+b};},calculateConstrainedPosition:function(g,b,k,d){var j=this,c,h=j.floatParent,e=h?h.getTargetEl():null,a,f,i,l=false;
if(k&&h){a=e.getXY();f=e.getBorderPadding();a[0]+=f.beforeX;a[1]+=f.beforeY;if(b){i=[b[0]+a[0],b[1]+a[1]];}}else{i=b;}g=g||j.constrainTo||e||j.container||j.el.parent();if(k&&i){i=j.reverseTranslateXY(i);}c=((j.constrainHeader&&j.header.rendered)?j.header:j).getConstrainVector(g,i,d);if(c){l=b||j.getPosition(k);
l[0]+=c[0];l[1]+=c[1];}return l;},getConstrainRegion:function(){var g=this,c=g.el,a=c.dom.nodeName==="BODY",e=c.dom,f=c.getBorders(),h=c.getXY(),d=h[0]+f.beforeX,i=h[1]+f.beforeY,j,b,k;if(a){j=c.getScroll();d=j.left;i=j.top;b=Ext.Element.getViewportWidth();k=Ext.Element.getViewportHeight();}else{b=e.clientWidth;
k=e.clientHeight;}return new Ext.util.Region(i,d+b,i+k,d);},getConstrainVector:function(g,c,e){var h=this,a=h.getRegion(),d=[0,0],b=(h.shadow&&h.constrainShadow&&!h.shadowDisabled)?h.el.shadow.getShadowSize():undefined,i=false,f=h.constraintInsets;if(!(g instanceof Ext.util.Region)){g=Ext.get(g.el||g);
g=g.getConstrainRegion();}if(f){f=Ext.isObject(f)?f:Ext.Element.parseBox(f);g.adjust(f.top,f.right,f.bottom,f.left);}if(c){a.translateBy(c[0]-a.x,c[1]-a.y);}if(e){a.right=a.left+e[0];a.bottom=a.top+e[1];}if(b){g.adjust(b[0],-b[1],-b[2],b[3]);}if(a.right>g.right){i=true;d[0]=(g.right-a.right);}if(a.left+d[0]<g.left){i=true;
d[0]=(g.left-a.left);}if(a.bottom>g.bottom){i=true;d[1]=(g.bottom-a.bottom);}if(a.top+d[1]<g.top){i=true;d[1]=(g.top-a.top);}return i?d:false;},getOffsetsTo:function(a){var c=this.getXY(),b=a.isRegion?[a.x,a.y]:Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]];},getRegion:function(a,b){var c=this.getBox(a,b);
return new Ext.util.Region(c.top,c.right,c.bottom,c.left);},getClientRegion:function(){var h=this,d=h.el,f=d.dom,e=h.getBox(true),b=f.offsetHeight>f.clientHeight,g=f.offsetWidth>f.clientWidth,i,a,c;if(b||g){a=Ext.getScrollbarSize();if(g){g=a.width;c=d.getStyle("direction")==="rtl"&&!Ext.supports.rtlVertScrollbarOnRight;
if(c){i=d.getPadding("l");e.left-=i+Math.max(i,g);}else{i=d.getPadding("r");e.right+=i-Math.max(i,g);}}if(b){b=a.height;i=d.getPadding("b");e.bottom+=i-Math.max(i,b);}}return new Ext.util.Region(e.top,e.right,e.bottom,e.left);},getViewRegion:function(){var f=this,c=f.el,a=c.dom.nodeName==="BODY",e,i,g,h,d,b,j;
if(a){i=c.getScroll();d=i.left;h=i.top;b=Ext.Element.getViewportWidth();j=Ext.Element.getViewportHeight();}else{e=f.getBorderPadding();g=f.getXY();d=g[0]+e.beforeX;h=g[1]+e.beforeY;b=f.getWidth(true);j=f.getHeight(true);}return new Ext.util.Region(h,d+b,h+j,d);},move:function(i,b,c){var f=this,l=f.getXY(),j=l[0],h=l[1],d=[j-b,h],k=[j+b,h],g=[j,h-b],a=[j,h+b],e={l:d,left:d,r:k,right:k,t:g,top:g,up:g,b:a,bottom:a,down:a};
i=i.toLowerCase();f.setXY([e[i][0],e[i][1]],c);},setBox:function(c){var b=this,a,d;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top};}b.constrainBox(c);a=c.x;d=c.y;b.setXY([a,d]);b.setSize(c.width,c.height);b.afterSetPosition(a,d);return b;},constrainBox:function(d){var c=this,b,a,e;
if(c.constrain||c.constrainHeader){a=("x" in d)?d.x:d.left;e=("y" in d)?d.y:d.top;b=c.calculateConstrainedPosition(null,[a,e],false,[d.width,d.height]);if(b){d.x=b[0];d.y=b[1];}}},translatePoints:function(a,c){var b=this.translateXY(a,c);return{left:b.x,top:b.y};},translateXY:function(g,e){var d=this,b=d.el,h=b.getStyle(d._positionTopLeft),a=h.position==="relative",c=parseFloat(h.left),f=parseFloat(h.top),i=d.getXY();
if(Ext.isArray(g)){e=g[1];g=g[0];}if(isNaN(c)){c=a?0:b.dom.offsetLeft;}if(isNaN(f)){f=a?0:b.dom.offsetTop;}c=(typeof g==="number")?g-i[0]+c:undefined;f=(typeof e==="number")?e-i[1]+f:undefined;return{x:c,y:f};},reverseTranslateXY:function(i){var g=i,c=this.el,d=c.dom,b=d.offsetParent,a,e,h,f;if(b){a=c.isStyle("position","relative"),e=Ext.fly(b).getXY(),h=i[0]+e[0]+b.clientLeft;
f=i[1]+e[1]+b.clientTop;if(a){h+=c.getPadding("l");f+=c.getPadding("t");}g=[h,f];}return g;},privates:{clipTo:function(j,b){var c,a=this.el,g=a.getRegion(),d,h,e=[],m=this.clippedCls,k,f,l;if(j.isRegion){c=j;}else{c=(j.isComponent?j.el:Ext.fly(j)).getConstrainRegion();}if(!b){b=15;}if(b&1&&(d=c.top-g.top)>0){e[0]=d;
f=true;}else{e[0]=-10000;}if(b&2&&(d=g.right-c.right)>0){e[1]=Math.max(0,a.getWidth()-d);f=true;}else{e[1]=10000;}if(b&4&&(d=g.bottom-c.bottom)>0){e[2]=Math.max(0,a.getHeight()-d);f=true;}else{e[2]=10000;}if(b&8&&(d=c.left-g.left)>0){e[3]=d;f=true;}else{e[3]=-10000;}k="rect(";for(h=0;h<4;++h){k+=Ext.Element.addUnits(e[h],"px");
k+=(h===3)?")":",";}a.dom.style.clip=k;a.addCls(m);if((l=a.shadow)&&(a=l.el)&&a.dom){e[2]-=l.offsets.y;e[3]-=l.offsets.x;k="rect(";for(h=0;h<4;++h){k+=Ext.Element.addUnits(e[h],"px");k+=(h===3)?")":",";}a.dom.style.clip=k;if(f&&!Ext.supports.CSS3BoxShadow){a.dom.style.display="none";}else{a.dom.style.display="";
a.addCls(m);}}},clearClip:function(){var b=this.el,a=this.clippedCls;b.dom.style.clip=Ext.isIE8?"auto":"";b.removeCls(a);if(b.shadow&&b.shadow.el&&b.shadow.el.dom){b.shadow.el.dom.style.clip=Ext.isIE8?"auto":"";if(!Ext.supports.CSS3BoxShadow){b.dom.style.display="";b.removeCls(a);}}}}});