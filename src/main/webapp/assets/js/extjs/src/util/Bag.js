Ext.define("Ext.util.Bag",{isBag:true,constructor:function(){this.items=[];this.map={};},generation:0,length:0,beginUpdate:Ext.emptyFn,endUpdate:Ext.emptyFn,add:function(m){var k=this,j=k.items,a=k.map,d=1,e,g,l,c,f,h,b;if(Ext.isArray(m)){e=h=[];d=m.length;}for(g=0;g<d;g++){c=k.getKey(f=e?m[g]:m);l=a[c];
if(l===undefined){j.push(f);a[c]=k.length++;if(e){e.push(f);}else{h=f;}}else{b=j[l];if(e){e.push(b);}else{h=b;}j[l]=f;}}++k.generation;return h;},clear:function(){var c=this,b=c.generation||c.length,a=b?c.items:[];if(b){c.items=[];c.length=0;c.map={};++c.generation;}return a;},clone:function(){var c=this,b=new c.self(),a=c.length;
if(a){Ext.apply(b.map,c.map);b.items=c.items.slice();b.length=c.length;}return b;},contains:function(c){var a=false,d=this.map,b;if(c!=null){b=this.getKey(c);if(b in d){a=this.items[d[b]]===c;}}return a;},containsKey:function(a){return a in this.map;},destroy:function(){this.items=this.map=null;this.callParent();
},each:function(f,e){var b=this.items,a=b.length,d,c;if(a){e=e||this;b=b.slice(0);for(d=0;d<a;d++){c=f.call(e,b[d],d,a);if(c===false){break;}}}return c;},getAt:function(b){var a=null;if(b<this.length){a=this.items[b];}return a;},get:function(a){return this.getByKey(a);},getByKey:function(b){var c=this.map,a=(b in c)?this.items[c[b]]:null;
return a;},indexOfKey:function(b){var c=this.map,a=(b in c)?c[b]:-1;return a;},last:function(){return this.items[this.length-1];},updateKey:function(b,d){var a=this,c=a.map,e;if(!b||!d){return;}if((e=a.getKey(b))!==d){if(a.getAt(c[d])===b&&!(e in c)){a.generation++;c[e]=c[d];delete c[d];}}else{if(e in c&&a.getAt(c[e])!==b){Ext.raise('Duplicate newKey "'+e+'" for item with oldKey "'+d+'"');
}if(d in c&&a.getAt(c[d])!==b){Ext.raise('Incorrect oldKey "'+d+'" for item with newKey "'+e+'"');}}},getCount:function(){return this.length;},getKey:function(a){return a.id||a.getId();},getRange:function(d,a){var c=this.items,e=c.length,b;if(!e){b=[];}else{b=Ext.Number.clipIndices(e,[d,a]);b=c.slice(b[0],b[1]);
}return b;},remove:function(o){var k=this,a=k.map,j=k.items,h=null,d=1,g,e,f,l,c,m,b;if(Ext.isArray(o)){d=o.length;e=h=[];}if(k.length){for(f=0;f<d;f++){l=a[c=k.getKey(e?o[f]:o)];if(l!==undefined){delete a[c];b=j[l];if(e){e.push(b);}else{h=b;}m=j.pop();if(l<--k.length){j[l]=m;a[k.getKey(m)]=l;}g=true;
}}if(g){++k.generation;}}return h;},removeByKey:function(a){var b=this.getByKey(a);if(b){this.remove(b);}return b||null;},replace:function(a){this.add(a);return a;},sort:function(b){var d=this,a=d.items,e=a.length,c;if(e){Ext.Array.sort(a,b);d.map={};while(e-->0){c=a[e];d.map[d.getKey(c)]=e;}++d.generation;
}}});