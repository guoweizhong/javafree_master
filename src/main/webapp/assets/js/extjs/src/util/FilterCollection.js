Ext.define("Ext.util.FilterCollection",{extend:"Ext.util.Collection",requires:["Ext.util.Filter"],isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);b.callParent([a]);b.setDecoder(b.decodeFilter);},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a;
},getFilterFn:function(){return this.filterFn;},isItemFiltered:function(a){return !this.filterFn(a);},getFilterCount:function(){var c=this.items,a=c.length,b;for(b=a-1;b>=0;b--){if(c[b].getDisabled()){a--;}}return a;},decodeFilter:function(c){var b=this.getOptions(),a=b.getRootProperty(),d;if(c.isFilter){if(!c.getRoot()){c.setRoot(a);
}}else{d={root:a};if(Ext.isFunction(c)){d.filterFn=c;}else{if(!Ext.isObject(c)){Ext.raise("Invalid filter specified: "+c);}d=Ext.apply(d,c);if(d.fn){d.filterFn=d.fn;delete d.fn;}if(Ext.util.Filter.isInvalid(d)){return false;}}c=new Ext.util.Filter(d);}return c;},decodeRemoveItems:function(o,j){var q=this,k=(j===undefined)?o:o[j];
if(!k.$cloned){if(o.length>j+1||!Ext.isIterable(k)){k=Ext.Array.slice(o,j);}var e=q.items,m=k.length,g=[],b,f,c,l,a,r,h,d,p;for(f=0;f<m;f++){b=k[f];if(b&&b.isFilter){g.push(b);}else{p=typeof b;c=p==="function";l=b.property!==undefined&&b.value!==undefined;a=p==="string";if(!c&&!l&&!a){Ext.raise("Invalid filter specification: "+b);
}for(d=e.length;d-->0;){r=e[d];h=false;if(a){h=r.getProperty()===b;}else{if(c){h=r.getFilterFn()===b;}else{if(l){h=r.getProperty()===b.property&&r.getValue()===b.value;}}}if(h){g.push(r);}}}}k=g;k.$cloned=true;}return k;},getOptions:function(){return this.$filterable||this;}});