Ext.define("Ext.util.DelimitedValue",{dateFormat:"C",delimiter:"\t",lineBreak:"\n",quote:'"',parseREs:{},quoteREs:{},lineBreakRe:/\r?\n/g,lastLineBreakRe:/(\r?\n|\r)$/,constructor:function(a){if(a){Ext.apply(this,a);}},decode:function(j,b){if(!j){return[];}var h=this,c=b||h.delimiter,m=[],n=[m],a=h.quote,f=h.quoteREs,k=h.parseREs,l=k[c]||(k[c]=new RegExp("(\\"+c+"|\\r?\\n|\\r|^)"+"(?:\\"+a+"([^\\"+a+"]*(?:\\"+a+"\\"+a+"[^\\"+a+"]*)*)\\"+a+"|"+'([^"\\'+c+"\\r\\n]*))","gi")),e=f[a]||(f[a]=new RegExp("\\"+a+"\\"+a,"g")),g,d,i;
j=j.replace(h.lastLineBreakRe,"");while((g=l.exec(j))){d=g[1];if(d.length&&d!==c){n.push(m=[]);}if(!g.index&&g[0].charAt(0)===c){m.push("");}if(g[2]){i=g[2].replace(e,'"');}else{i=g[3];}m.push(i);}return n;},encode:function(l,c){var i=this,e=c||i.delimiter,d=i.dateFormat,b=i.quote,j=b+b,k=l.length,g=i.lineBreakRe,n=[],a=[],f,h,m;
while(k-->0){m=l[k];a.length=h=m.length;while(h-->0){f=m[h];if(f==null){f="";}else{if(typeof f==="string"){if(f){if(f.indexOf(b)>-1){f=b+f.split(b).join(j)+b;}else{if(f.indexOf(e)>-1||g.test(f)){f=b+f+b;}}}}else{if(Ext.isDate(f)){f=Ext.Date.format(f,d);}else{if(f&&(isNaN(f)||Ext.isArray(f))){Ext.raise("Cannot serialize "+Ext.typeOf(f)+" into CSV");
}}}}a[h]=f;}n[k]=a.join(e);}return n.join(i.lineBreak);}});