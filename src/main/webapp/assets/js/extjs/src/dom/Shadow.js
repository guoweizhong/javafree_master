Ext.define("Ext.dom.Shadow",{extend:"Ext.dom.Underlay",alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(b){var d=this,e,c,f,a;d.callParent([b]);d.elementConfig={cls:d.cls,role:"presentation"};f=d.offset;
a=Math.floor(f/2);d.opacity=50;switch(d.mode.toLowerCase()){case"drop":e={x:0,y:0,w:f,h:f};if(Ext.supports.CSS3BoxShadow){c={x:f,y:f,h:-f,w:-f};}else{c={x:-a,y:-a,h:-a,w:-a};}break;case"sides":e={x:-f,y:0,w:f*2,h:f};if(Ext.supports.CSS3BoxShadow){c={x:0,y:f,h:-f,w:0};}else{c={x:1+a-2*f,y:-(1+a),h:-1,w:a-1};
}break;case"frame":e={x:-f,y:-f,w:f*2,h:f*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0};}else{c={x:1+a-2*f,y:1+a-2*f,h:f-a-1,w:f-a-1};}break;case"bottom":e={x:-f,y:0,w:f*2,h:f};if(Ext.supports.CSS3BoxShadow){c={x:0,y:f,h:-f,w:0};}else{c={x:0,y:f,h:0,w:0};}break;}d.offsets=c;d.outerOffsets=e;},getShadowSize:function(){var b=this,d=b.el?b.offset:0,a=[d,d,d,d],c=b.mode.toLowerCase();
if(b.el&&c!=="frame"){a[0]=0;if(c=="drop"){a[3]=0;}}return a;},boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow";}else{if("MozBoxShadow" in a){b="MozBoxShadow";}}}return b;}()),beforeShow:function(){var b=this,a=b.el.dom.style,c=b.shim;
if(Ext.supports.CSS3BoxShadow){a[b.boxShadowProperty]="0 0 "+(b.offset+2)+"px #888";}else{a.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")";}if(c){c.realign();}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100;
}this.opacity=a;b.setOpacity(a);}}});