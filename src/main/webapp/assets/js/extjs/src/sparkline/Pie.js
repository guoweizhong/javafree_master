Ext.define("Ext.sparkline.Pie",{extend:"Ext.sparkline.Base",alias:"widget.sparklinepie",config:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000"},tipTpl:'&#9679; {value} ({percent:number("0.0")}%)',applyValues:function(a){a=Ext.Array.map(Ext.Array.from(a),Number);
this.disabled=!(a&&a.length);this.updateConfigChange();return a;},onUpdate:function(){var d=this,a=d.values,c=0,b;d.callParent(arguments);d.shapes={};d.valueShapes={};if(a.length>0){for(b=a.length;b--;){c+=a[b];}}d.total=c;d.radius=Math.floor(Math.min(d.getWidth(),d.getHeight())/2);},getRegion:function(a,d){var b=window.devicePixelRatio||1,c=this.canvas.getShapeAt(a*b,d*b);
return(c!=null&&this.shapes[c]!=null)?this.shapes[c]:null;},getRegionFields:function(b){var a=this.getSliceColors();return{isNull:this.values[b]==null,value:this.values[b],percent:this.values[b]/this.total*100,color:a[b%a.length],offset:b};},renderHighlight:function(a){this.renderSlice(a,true).append();
},renderSlice:function(l,e){var n=this,d=n.canvas,m=n.radius,a=n.getBorderWidth(),h=n.getOffset(),b=2*Math.PI,r=n.values,o=n.total,k=h?(2*Math.PI)*(h/360):0,c,g,j,p,f,q=this.getSliceColors();p=r.length;for(j=0;j<p;j++){c=k;g=k;if(o>0){g=k+(b*(r[j]/o));}if(l===j){f=q[j%q.length];if(e){f=n.calcHighlightColor(f);
}return d.drawPieSlice(m,m,m-a,c,g,null,f);}k=g;}},renderGraph:function(){var g=this,c=g.canvas,j=g.values,e=g.radius,a=g.getBorderWidth(),f,d,b=g.shapes||(g.shapes={}),h=g.valueShapes||(g.valueShapes={});if(!g.callParent()){return;}if(a){c.drawCircle(e,e,Math.floor(e-(a/2)),g.getBorderColor(),null,a).append();
}for(d=j.length;d--;){if(j[d]){f=g.renderSlice(d).append();h[d]=f.id;b[f.id]=d;}}if(g.currentPageXY&&g.canvasRegion.contains(g.currentPageXY)){g.currentRegion=null;g.updateDisplay();}c.render();}});