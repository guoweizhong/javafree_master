Ext.define("Ext.sparkline.Bullet",{extend:"Ext.sparkline.Base",alias:"widget.sparklinebullet",config:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:null},tipTpl:["{fieldkey:this.fields} - {value}",{fields:function(a){if(a==="r"){return"Range";
}if(a==="p"){return"Performance";}if(a==="t"){return"Target";}}}],applyValues:function(a){a=Ext.Array.map(Ext.Array.from(a),this.normalizeValue);this.disabled=!(a&&a.length);this.updateConfigChange();return a;},onUpdate:function(){var d=this,b=d.values,c,a,f,e=d.getBase();d.callParent(arguments);f=b.slice();
f[0]=f[0]===null?f[2]:f[0];f[1]=b[1]===null?f[2]:f[1];c=Math.min.apply(Math,b);a=Math.max.apply(Math,b);if(e==null){c=c<0?c:0;}else{c=e;}d.min=c;d.max=a;d.range=a-c;d.shapes={};d.valueShapes={};d.regiondata={};if(!b.length){d.disabled=true;}},getRegion:function(a,c){var b=this.canvas.getShapeAt(a,c);
return(b!==undefined&&this.shapes[b]!==undefined)?this.shapes[b]:undefined;},getRegionFields:function(a){return{fieldkey:a.substr(0,1),value:this.values[parseInt(a.substr(1),10)],region:a};},renderHighlight:function(e){var d=this,b=d.valueShapes,a=d.shapes,f=b[e],c;delete a[f];switch(e.substr(0,1)){case"r":c=d.renderRange(parseInt(e.substr(1),10),true);
break;case"p":c=d.renderPerformance(true);break;case"t":c=d.renderTarget(true);break;}b[e]=c.id;a[c.id]=e;d.canvas.replaceWithShape(f,c);},renderRange:function(g,c){var d=this,f=d.values[g],e=Math.round(d.getWidth()*((f-d.min)/d.range)),a=d.getRangeColors(),b=a[Math.min(g-2,a.length-1)];if(c){b=d.calcHighlightColor(b);
}return d.canvas.drawRect(0,0,e-1,d.getHeight()-1,b,b);},renderPerformance:function(b){var d=this.values[1],c=Math.round(this.getWidth()*((d-this.min)/this.range)),a=this.getPerformanceColor();if(b){a=this.calcHighlightColor(a);}return this.canvas.drawRect(0,Math.round(this.getHeight()*0.3),c-1,Math.round(this.getHeight()*0.4)-1,a,a);
},renderTarget:function(c){var g=this.values[0],e=this.getTargetWidth(),a=Math.round(this.getWidth()*((g-this.min)/this.range)-(e/2)),f=Math.round(this.getHeight()*0.1),d=this.getHeight()-(f*2),b=this.getTargetColor();if(c){b=this.calcHighlightColor(b);}return this.canvas.drawRect(a,f,e-1,d-1,b,b);},renderGraph:function(){var f=this,g=f.values.length,d=f.canvas,e,c,b=f.shapes||(f.shapes={}),a=f.valueShapes||(f.valueShapes={});
if(!f.callParent()){return;}for(e=2;e<g;e++){c=f.renderRange(e).append();b[c.id]="r"+e;a["r"+e]=c.id;}if(f.values[1]!==null){c=f.renderPerformance().append();b[c.id]="p1";a.p1=c.id;}if(f.values[0]!==null){c=this.renderTarget().append();b[c.id]="t0";a.t0=c.id;}if(f.currentPageXY&&f.canvasRegion.contains(f.currentPageXY)){f.updateDisplay();
}d.render();},privates:{isValidRegion:function(b,a){return parseInt(b.substr(1),10)<a.length;}}});