Ext.define("Ext.drag.Constraint",{alias:"drag.constraint.base",mixins:["Ext.mixin.Factoryable"],factoryConfig:{defaultType:"base",type:"drag.constraint"},config:{element:null,horizontal:null,region:null,snap:null,source:null,vertical:null,x:null,y:null},constructor:function(a){this.initConfig(a);},applyElement:function(a){if(a&&typeof a!=="boolean"){a=Ext.get(a);
}return a||null;},applySnap:function(a){if(typeof a==="number"){a={x:a,y:a};}return a;},constrain:function(l,a){var g=this,j=l[0],i=l[1],k=g.constrainInfo,f=k.initial,d=k.x,c=k.y,b=k.snap,e,h;if(!k.vertical){if(b&&b.x){if(b.xFn){j=b.x.call(g,a,j);}else{j=g.doSnap(j,f.x,b.x);}}if(d){e=d[0];h=d[1];if(e!==null&&j<e){j=e;
}if(h!==null&&j>h){j=h;}}}else{j=f.x;}if(!k.horizontal){if(b&&b.y){if(b.yFn){i=b.y.call(g,a,i);}else{i=g.doSnap(i,f.y,b.y);}}if(c){e=c[0];h=c[1];if(e!==null&&i<e){i=e;}if(h!==null&&i>h){i=h;}}}else{i=f.y;}return[j,i];},destroy:function(){this.setSource(null);this.setElement(null);this.callParent();},privates:{constrainValue:function(d,c,h){var g=null,f=d===null,e=c===null;
if(!(f&&e)){if(f){g=c;}else{if(e){g=d;}else{g=h(d,c);}}}return g;},doSnap:function(b,c,a){if(!a){return b;}var d=(b-c)/a,e=Math.floor(d);if(d-e<=0.5){d=e;}else{d=e+1;}return c+(a*d);},onDragStart:function(o){var u=this,m=u.getSnap(),a=!!u.getVertical(),r=!!u.getHorizontal(),b=u.getElement(),d=u.getRegion(),n=o.proxy,h=n.element,k=u.getX(),j=u.getY(),t=null,s=null,q=null,p=null,g=null,f=null,e=null,c=null,i,l;
if(b){if(typeof b==="boolean"){b=u.getSource().getElement().parent();}if(o.local){i=b.getStyle("position");if(i==="relative"||i==="absolute"){l=b.getSize();d=new Ext.util.Region(0,l.width,l.height,0);}else{d=b.getRegion(true,true);}}else{d=b.getRegion(true);}}if(d){if(!a){g=d.left;f=d.right-(h?n.width:0);
}if(!r){e=d.top;c=d.bottom-(h?n.height:0);}}if(!a&&(d||k)){if(k){t=k[0];s=k[1];}if(t!==null||s!==null||g!==null||f!==null){t=u.constrainValue(t,g,Math.max);s=u.constrainValue(s,f,Math.min);k=[t,s];}}if(!r&&(d||j)){if(j){q=j[0];p=j[1];}if(q!==null||p!==null||e!==null||c!==null){q=u.constrainValue(q,e,Math.max);
p=u.constrainValue(p,c,Math.min);j=[q,p];}}if(m){m={x:m.x,xFn:typeof m.x==="function",y:m.y,yFn:typeof m.y==="function"};}u.constrainInfo={initial:o.element.initial,vertical:a,horizontal:r,x:k,y:j,snap:m};}}});