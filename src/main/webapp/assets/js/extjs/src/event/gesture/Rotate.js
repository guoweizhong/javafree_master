Ext.define("Ext.event.gesture.Rotate",{extend:"Ext.event.gesture.MultiTouch",priority:800,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){var i=this,g,b,d,f,c,a,j,k;if(i.isTracking){g=h.touches;b=i.lastAngle;d=g[0].point;
f=g[1].point;c=d.getAngleTo(f);if(b!==null){k=Math.abs(b-c);a=c+360;j=c-360;if(Math.abs(a-b)<k){c=a;}else{if(Math.abs(j-b)<k){c=j;}}}i.lastAngle=c;if(!i.isStarted){i.isStarted=true;i.startAngle=c;i.fire("rotatestart",h,{touches:g,angle:c,rotation:0});}else{i.fire("rotate",h,{touches:g,angle:c,rotation:c-i.startAngle});
}i.lastTouches=Ext.Array.clone(g);}},onTouchEnd:function(a){if(this.isStarted){this.fire("rotateend",a);}return this.callParent([a]);},onCancel:function(a){this.fire("rotatecancel",a,null,true);},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;return this.callParent();}},function(a){var b=Ext.manifest.gestures;
a.instance=new a(b&&b.rotate);});