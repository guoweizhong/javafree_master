<%@ page contentType="text/html; charset=UTF-8"%><%@ include file="/WEB-INF/views/framework/common/taglibs.jsp"%><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>编辑机构编码信息</title></head><body><script type="text/javascript">var requireCSS=["${ctx}/assets/plugins/jquery-validate/jquery.validate.css"];loadCSS(requireCSS);var requireJS=["${ctx}/assets/plugins/jquery-validate/jquery.validate.min.js","${ctx}/assets/plugins/jquery-validate/lib/jquery.metadata.min.js","${ctx}/assets/plugins/jquery-validate/lib/jquery.form.min.js","${ctx}/assets/plugins/jquery-validate/localization/messages_cn.js"];loadJS(requireJS,function(){formValidateInit()});function formValidateInit(){jQuery.metadata.setType("attr","validate");jQuery("#orgcode_form").validate()};</script><script type="text/javascript">Ext.onReady(function(){function e(){if(jQuery("#orgcode_form").valid()){var g=function(i){var h=Ext.JSON.decode(i);if(h.success==true){Ext.MessageBox.alert({title:"提示信息:",msg:h.info,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.INFO})}else{Ext.MessageBox.show({title:"错误提示:",msg:h.error,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}Ext.getDom("name").value="";Ext.getDom("code").value="";Ext.getDom("id").value="";$("#sn").val(parseInt($("#sn").val()==""?0:$("#sn").val())+1)};jQuery("#orgcode_form").ajaxSubmit(g)}}function f(){if(jQuery("#orgcode_form").valid()){var g=function(i){var h=Ext.JSON.decode(i);if(h.success==true){Ext.MessageBox.alert({title:"提示信息:",msg:h.info,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.INFO,fn:function(){d()}})}else{Ext.MessageBox.show({title:"错误提示:",msg:h.error,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.ERROR})}};jQuery("#orgcode_form").ajaxSubmit(g)}}function d(){var h=Ext.getCmp("${param.popupwinid}");if(h){h.close()}var g=Ext.getCmp("${param.parentWinGridPanelID}");if(g){g.store.load()}}var a=[{pressed:false,cls:"x-btn-text-icon",icon:ICONPATH+"button/save_add.png",text:"保存并新增",handler:function(){e()}},"-",{pressed:false,cls:"x-btn-text-icon",icon:ICONPATH+"button/saved.png",text:"保存",handler:function(){f()}},"-",{pressed:false,cls:"x-btn-text-icon",icon:ICONPATH+"button/dialog-close.png",text:"关闭",handler:function(){d()}}];var b=Ext.create("Ext.panel.Panel",{layout:"fit",items:[{title:"",border:false,bodyCls:"form_panel_body",autoScroll:true,contentEl:"orgcode_form-main-content",tbar:a,anchor:"98% 98%"}]});var c=Ext.getCmp("${param.popupwinid}");if(c){c.removeAll();c.add(b)}});</script><div id="orgcode_form-main-content" class="main_from"><form:form id="orgcode_form" modelAttribute="orgCode" action="${pageContext.request.contextPath}/identity/orgcode/doEditOrgCode" method="post" enctype="multipart/form-data"><form:hidden path="id"/><input id="orgcodeid" name="orgcodeid" type="hidden" value="${orgCode.id}"><div class="form_table_box" style=" margin:0 auto; width:98%;"><div class="form_table"><h2 class="form_title_head"><div class="tip"><span class="star">标注的为必填项</span></div> 编辑机构编码信息 </h2><table width="100%" border="0" cellspacing="0" cellpadding="0" class="form_table_blk_border"><tr><td class="form-TdLabel" width="15%"><span class="star">编&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码: </span></td><td nowrap="nowrap" class="form-TdField"><form:input path="code" validate="{required:true,tableName:true,remote:{url:'${pageContext.request.contextPath}/identity/orgcode/doValidateCode',type:'post',data:{id:function(){return jQuery('#orgcodeid').val();}}},messages:{remote:'该编码已经存在,请输入其它值!'}}" cssStyle="width:60%"/></td></tr><tr><td class="form-TdLabel" width="15%"><span class="star">名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;称: </span></td><td nowrap="nowrap" class="form-TdField"><form:input path="name" validate="{required:true}" cssStyle="width:60%"/></td></tr><tr><td class="form-TdLabel">序&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;号:</td><td class="form-TdField"><form:input path="sn" validate="{digits:true}" cssStyle="width:60%"/></td></tr><tbody></table></div></div></form:form></div></body></html>